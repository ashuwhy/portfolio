(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42],{7314:function(e,t,n){Promise.resolve().then(n.bind(n,5885))},302:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(2265);function s(){let[e,t]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=()=>{t(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}},5885:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var r=n(7437),s=n(8458),a=n(7907),i=n(2265),o=n(9817),c=n(1825),l=n(5179),u=n(5358),d=n(5322),f=n(302),m=n(9108),x=n(1652),h=n(8792),p=n(7742),g=n(1657);let b=(0,p.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-[#9D7D28] text-white hover:bg-[#9D7D28]/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function j(e){let{className:t,variant:n,...s}=e;return(0,r.jsx)("div",{className:(0,g.cn)(b({variant:n}),t),...s})}function v(e){let{note:t,saveNote:n,canEdit:s}=e,p=(0,f.h)(),g=(0,a.usePathname)(),[b,v]=(0,i.useState)(!1),[N,y]=(0,i.useState)("");return(0,i.useEffect)(()=>{y((0,o.WU)((0,c.D)(t.created_at),"MMMM d, yyyy 'at' h:mm a"))},[t.created_at]),(0,r.jsxs)(r.Fragment,{children:[p&&"/"!==g&&(0,r.jsx)(h.default,{href:"/",children:(0,r.jsxs)("button",{className:"pt-2 flex items-center",children:[(0,r.jsx)(m.Z,{className:"w-5 h-5 text-[#e2a727]"}),(0,r.jsx)("span",{className:"text-[#e2a727] text-base ml-1",children:"Notes"})]})}),(0,r.jsxs)("div",{className:"px-2 bg-[#1c1c1c] mb-4 relative",children:[(0,r.jsxs)("div",{className:"flex justify-center items-center",children:[(0,r.jsx)("p",{className:"text-gray-400 text-xs",children:N}),!t.public&&(0,r.jsxs)(j,{className:"text-xs justify-center items-center ml-2",children:[(0,r.jsx)(x.Z,{className:"w-3 h-3 mr-1"}),"Private"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[t.public||!s?(0,r.jsx)("span",{className:"text-2xl font-bold flex-grow mr-2 py-2 leading-normal min-h-[50px]",children:t.title}):(0,r.jsx)(l.I,{id:"title",value:t.title,className:"placeholder:text-gray-400 text-2xl font-bold flex-grow mr-2 py-2 leading-normal min-h-[50px]",placeholder:"Your title here...",onChange:e=>{n({title:e.target.value})},autoFocus:!t.title}),!s||t.public||p?(0,r.jsx)("span",{children:t.emoji}):(0,r.jsx)(d.pn,{children:(0,r.jsxs)(d.u,{children:[(0,r.jsx)(d.aJ,{onClick:()=>v(!b),className:"cursor-pointer",children:t.emoji}),(0,r.jsx)(d._v,{className:"bg-[#1c1c1c] text-gray-400 border-none",children:"Select an emoji"})]})})]}),b&&!p&&!t.public&&s&&(0,r.jsx)("div",{className:"absolute top-full right-0 z-10",children:(0,r.jsx)(u.Z,{onEmojiSelect:e=>{n({emoji:e.native}),v(!1)},autoFocus:!0,searchPosition:"top",onClickOutside:()=>v(!1)})})]})]})}let N=i.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("textarea",{className:(0,g.cn)("flex h-full w-full rounded-md bg-background text-sm placeholder:text-gray-400 focus:outline-none",n),ref:t,...s})});N.displayName="Textarea";var y=n(8046),w=n(9458),I=n(8851);function S(e){let{note:t,saveNote:n,canEdit:s}=e,[a,o]=(0,i.useState)(!t.content&&s);return(0,r.jsx)("div",{className:"px-2",children:a&&s?(0,r.jsx)(N,{id:"content",value:t.content,className:"bg-[#1c1c1c] min-h-screen focus:outline-none",placeholder:"Start writing...",onChange:e=>{n({content:e.target.value})},onFocus:()=>o(!0),onBlur:()=>o(!1)}):(0,r.jsx)("div",{className:"bg-[#1c1c1c] h-full text-sm",onClick:()=>s&&!t.public&&o(!0),children:(0,r.jsx)(y.U,{className:"markdown-body min-h-screen",remarkPlugins:[w.Z],rehypePlugins:[I.Z],components:{a:e=>{let{node:t,...n}=e;return(0,r.jsx)("a",{...n,target:"_blank",rel:"noopener noreferrer"})}},children:t.content})})})}var k=n(8216);function z(e){let{note:t}=e,n=(0,s.e)(),o=(0,a.useRouter)(),[c,l]=(0,i.useState)(t),[u,d]=(0,i.useState)(""),f=(0,i.useRef)(null),m=(0,i.useCallback)(async e=>{f.current&&clearTimeout(f.current);let t={...c,...e};l(t),f.current=setTimeout(async()=>{try{let{error:e}=await n.from("notes").update(t).match({id:c.id});if(e)throw e;await fetch("/revalidate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:c.slug})}),o.refresh()}catch(e){console.error("Save failed:",e)}},500)},[c,n,o]),x=u===c.session_id;return(0,r.jsxs)("div",{className:"h-full overflow-y-auto",children:[(0,r.jsx)(k.Z,{setSessionId:d}),(0,r.jsx)(v,{note:c,saveNote:m,canEdit:x}),(0,r.jsx)(S,{note:c,saveNote:m,canEdit:x})]})}},8216:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2265),s=n(1231);function a(e){let{setSessionId:t}=e;return(0,r.useEffect)(()=>{let e=localStorage.getItem("session_id")||(0,s.Z)();localStorage.getItem("session_id")||localStorage.setItem("session_id",e),t(e)},[t]),null}},5179:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(7437),s=n(2265),a=n(1657);let i=s.forwardRef((e,t)=>{let{className:n,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md bg-[#1c1c1c] text-md placeholder:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",n),ref:t,...i})});i.displayName="Input"},5322:function(e,t,n){"use strict";n.d(t,{_v:function(){return u},aJ:function(){return l},pn:function(){return o},u:function(){return c}});var r=n(7437),s=n(2265),a=n(1060),i=n(1657);let o=a.zt,c=a.fC,l=a.xz,u=s.forwardRef((e,t)=>{let{className:n,sideOffset:s=4,...o}=e;return(0,r.jsx)(a.VY,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...o})});u.displayName=a.VY.displayName},1657:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var r=n(3167),s=n(1367);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}},8458:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var r=n(1880);function s(){return(0,r.AY)("https://ejwpjpphnwdsbejkince.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqd3BqcHBobndkc2JlamtpbmNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjA2MTM1MzcsImV4cCI6MjAzNjE4OTUzN30.1XcrHRIVKIHQJjrMurxXgDG4USaVEAz5Zb6GM3L-tnI")}}},function(e){e.O(0,[10,511,260,971,69,744],function(){return e(e.s=7314)}),_N_E=e.O()}]);