(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{8790:function(e,t,s){Promise.resolve().then(s.t.bind(s,2445,23)),Promise.resolve().then(s.bind(s,6902)),Promise.resolve().then(s.bind(s,4274)),Promise.resolve().then(s.t.bind(s,9027,23))},302:function(e,t,s){"use strict";s.d(t,{h:function(){return n}});var a=s(2265);function n(){let[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=()=>{t(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}},8216:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2265),n=s(1231);function r(e){let{setSessionId:t}=e;return(0,a.useEffect)(()=>{let e=localStorage.getItem("session_id")||(0,n.Z)();localStorage.getItem("session_id")||localStorage.setItem("session_id",e),t(e)},[t]),null}},6902:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return eb}});var a=s(7437),n=s(2265),r=s(1421),o=s(7742),l=s(2235),i=s(1657);let d=r.zt,c=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.l_,{ref:t,className:(0,i.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...n})});c.displayName=r.l_.displayName;let u=(0,o.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground",custom:"bg-[#1c1c1c] text-white"}},defaultVariants:{variant:"custom"}}),m=n.forwardRef((e,t)=>{let{className:s,variant:n,...o}=e;return(0,a.jsx)(r.fC,{ref:t,className:(0,i.cn)(u({variant:n}),s),...o})});m.displayName=r.fC.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.aU,{ref:t,className:(0,i.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...n})}).displayName=r.aU.displayName;let f=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.x8,{ref:t,className:(0,i.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...n,children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})});f.displayName=r.x8.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,i.cn)("text-sm font-semibold",s),...n})});p.displayName=r.Dx.displayName;let x=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,i.cn)("text-sm opacity-90",s),...n})});x.displayName=r.dk.displayName;let h=0,g=new Map,w=e=>{if(g.has(e))return;let t=setTimeout(()=>{g.delete(e),j({type:"REMOVE_TOAST",toastId:e})},1e6);g.set(e,t)},y=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?w(s):e.toasts.forEach(e=>{w(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},N=[],v={toasts:[]};function j(e){v=y(v,e),N.forEach(e=>{e(v)})}function b(e){let{...t}=e,s=(h=(h+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>j({type:"DISMISS_TOAST",toastId:s});return j({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>j({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function S(){let{toasts:e}=function(){let[e,t]=n.useState(v);return n.useEffect(()=>(N.push(t),()=>{let e=N.indexOf(t);e>-1&&N.splice(e,1)}),[e]),{...e,toast:b,dismiss:e=>j({type:"DISMISS_TOAST",toastId:e})}}();return(0,a.jsxs)(d,{children:[e.map(function(e){let{id:t,title:s,description:n,action:r,...o}=e;return(0,a.jsxs)(m,{...o,children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[s&&(0,a.jsx)(p,{children:s}),n&&(0,a.jsx)(x,{children:n})]}),r,(0,a.jsx)(f,{})]},t)}),(0,a.jsx)(c,{})]})}var k=s(302),C=s(7907),E=s(8216),_=s(2720),I=s(5128),D=s(8670),R=s(1293);let T=R.fC;R.xz;let A=R.h_;R.x8;let O=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(R.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n})});O.displayName=R.aV.displayName;let L=n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(A,{children:[(0,a.jsx)(O,{}),(0,a.jsxs)(R.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-[#181818] bg-[#1c1c1c] p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[n,(0,a.jsxs)(R.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-gray-400",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});L.displayName=R.VY.displayName;let z=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(R.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...n})});z.displayName=R.Dx.displayName;let Z=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(R.dk,{ref:t,className:(0,i.cn)("text-sm text-gray-400",s),...n})});Z.displayName=R.dk.displayName;let P=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(I.mY,{ref:t,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-[#1c1c1c] text-popover-foreground",s),shouldFilter:!1,...n})});P.displayName=I.mY.displayName;let Y=e=>{let{children:t,...s}=e;return(0,a.jsx)(T,{...s,children:(0,a.jsx)(L,{className:"overflow-hidden p-0 shadow-lg [&>button]:text-white",children:(0,a.jsx)(P,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-gray-400 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})})},M=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsxs)("div",{className:"flex items-center px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(D.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50 text-gray-400"}),(0,a.jsx)(I.mY.Input,{ref:t,className:(0,i.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm text-white outline-none placeholder:text-gray-400 disabled:cursor-not-allowed disabled:opacity-50",s),...n})]})});M.displayName=I.mY.Input.displayName;let U=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(I.mY.List,{ref:t,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...n})});U.displayName=I.mY.List.displayName;let V=n.forwardRef((e,t)=>(0,a.jsx)(I.mY.Empty,{ref:t,className:"py-6 text-center text-sm text-gray-400",...e}));V.displayName=I.mY.Empty.displayName;let F=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(I.mY.Group,{ref:t,className:(0,i.cn)("overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-gray-400",s),...n})});F.displayName=I.mY.Group.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(I.mY.Separator,{ref:t,className:(0,i.cn)("-mx-1 h-px bg-border",s),...n})}).displayName=I.mY.Separator.displayName;let J=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(I.mY.Item,{ref:t,className:(0,i.cn)("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm text-white outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-[#181818] data-[disabled=true]:opacity-50",s),...n})});J.displayName=I.mY.Item.displayName;let H=e=>{let{className:t,...s}=e;return(0,a.jsx)("span",{className:(0,i.cn)("ml-auto text-xs tracking-widest text-gray-400",t),...s})};H.displayName="CommandShortcut";let K={new:()=>(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-5",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),spinner:e=>(0,a.jsx)("svg",{className:"spinner",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,a.jsx)("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})})};var X=s(8904),B=s(4314),q=s(6806),G=s(1231),Q=s(8458);async function W(e,t,s,a){let n=(0,Q.e)(),r=(0,G.Z)(),o="new-note-".concat(r),l={id:r,slug:o,title:"",content:"",public:!1,created_at:new Date().toISOString(),session_id:e,category:"today",emoji:"\uD83D\uDC4B\uD83C\uDFFC"};a(async()=>{try{await n.from("notes").upsert(l,{onConflict:"id"}),s(o),t.push("/".concat(o)),t.refresh()}catch(e){console.error("Error creating note:",e)}})}let $=(0,n.forwardRef)((e,t)=>{let{notes:s,sessionId:r,addNewPinnedNote:o,navigateNotes:l,togglePinned:i,deleteNote:d,highlightedNote:c}=e,[u,m]=(0,n.useState)(!1),[f,p]=(0,n.useState)(""),x=(0,C.useRouter)(),[,h]=(0,n.useTransition)();(0,n.useImperativeHandle)(t,()=>({setOpen:e=>{m(e)}})),(0,n.useEffect)(()=>{if(u){let e=setTimeout(()=>{let e=document.querySelector("[cmdk-input]");null==e||e.focus()},0);return()=>clearTimeout(e)}},[u]),(0,n.useEffect)(()=>{u||p("")},[u]),(0,n.useEffect)(()=>{let e=e=>{"k"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),m(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]);let g=e=>{x.push("/".concat(e)),m(!1)},w=(0,n.useCallback)(()=>{l("up"),m(!1)},[l]),y=(0,n.useCallback)(()=>{l("down"),m(!1)},[l]),N=(0,n.useCallback)(()=>{c&&(i(c.slug),m(!1))},[c,i]),v=(0,n.useCallback)(()=>{c&&(d(c),m(!1))},[c,d]),j=[{name:"New note",icon:(0,a.jsx)(K.new,{}),shortcut:"N",action:()=>{W(r,x,o,h),m(!1)}},{name:"Pin or unpin",icon:(0,a.jsx)(_.Z,{}),shortcut:"P",action:N},{name:"Move up",icon:(0,a.jsx)(X.Z,{}),shortcut:"K",action:w},{name:"Move down",icon:(0,a.jsx)(B.Z,{}),shortcut:"J",action:y},{name:"Delete note",icon:(0,a.jsx)(q.Z,{}),shortcut:"D",action:v}],b=function(e,t,s){let a=t.toLowerCase();return e.filter(e=>{let t=e.public,n=e.session_id===s,r=e.title.toLowerCase().includes(a),o=e.content.toLowerCase().includes(a);return(t||n)&&(r||o)})}(s,f,r),S=j.filter(e=>e.name.toLowerCase().includes(f.toLowerCase()));return(0,a.jsxs)(Y,{open:u,onOpenChange:m,children:[(0,a.jsx)(z,{className:"sr-only",children:"Command Menu"}),(0,a.jsx)(Z,{className:"sr-only",children:"Use this dialog to execute commands or search for a note"}),(0,a.jsx)(M,{placeholder:"Type a command or search for a note...",value:f,onValueChange:p}),(0,a.jsxs)(U,{children:[(0,a.jsx)(V,{children:"No results found"}),S.length>0&&(0,a.jsx)(F,{heading:"Commands",children:S.map(e=>(0,a.jsxs)(J,{onSelect:e.action,children:[e.icon,(0,a.jsx)("span",{className:"ml-2",children:e.name}),(0,a.jsx)(H,{children:e.shortcut})]},e.name))}),b.length>0&&(0,a.jsx)(F,{heading:"Notes",children:b.map(e=>(0,a.jsxs)(J,{onSelect:()=>g(e.slug),children:[e.emoji," ",e.title.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())]},e.id))})]})]})});$.displayName="CommandMenu";var ee=s(5322);function et(e){let{addNewPinnedNote:t,clearSearch:s}=e,[r,o]=(0,n.useState)(null),l=(0,C.useRouter)(),[i,d]=(0,n.useTransition)(),c=(0,n.useCallback)(()=>{s(),W(r,l,t,d)},[r,l,t,s]);return(0,n.useEffect)(()=>{let e=e=>{let t=e.target,s=t.isContentEditable||"INPUT"===t.tagName||"TEXTAREA"===t.tagName||"SELECT"===t.tagName;"n"!==e.key||e.metaKey||s||(e.preventDefault(),c())};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[c]),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(E.Z,{setSessionId:o}),(0,a.jsx)(ee.pn,{children:(0,a.jsxs)(ee.u,{children:[(0,a.jsx)(ee.aJ,{onClick:c,"aria-label":"Create new note",children:i?(0,a.jsx)("div",{className:"pr-1 pt-1",children:(0,a.jsx)(K.spinner,{})}):(0,a.jsx)(K.new,{})}),(0,a.jsx)(ee._v,{className:"bg-[#1c1c1c] text-gray-400 border-none",children:"Create a note"})]})})]})}var es=s(8792),ea=s(4522),en=s(8820),er=s(9295),eo=s(489);function el(e){let{isOpen:t,onPin:s,onEdit:n,onDelete:r,isPinned:o,canEditOrDelete:l}=e;return(0,a.jsxs)("div",{className:"absolute top-0 right-0 h-full flex items-center transition-opacity duration-300 ".concat(t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"),children:[(0,a.jsx)("button",{onClick:s,className:"bg-[#3293FC] text-white p-2 h-full w-16 flex items-center justify-center",children:o?(0,a.jsx)(en.Z,{size:20}):(0,a.jsx)(_.Z,{size:20})}),l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:n,className:"bg-[#787BFF] text-white p-2 h-full w-16 flex items-center justify-center",children:(0,a.jsx)(er.Z,{size:20})}),(0,a.jsx)("button",{onClick:r,className:"bg-[#FF4539] text-white p-2 h-full w-16 flex items-center justify-center",children:(0,a.jsx)(eo.Z,{size:20})})]})]})}var ei=s(7419),ed=s(7805),ec=s(9259),eu=s(7501);let em=ei.fC,ef=ei.xz;ei.ZA,ei.Uv,ei.Tr,ei.Ee,n.forwardRef((e,t)=>{let{className:s,inset:n,children:r,...o}=e;return(0,a.jsxs)(ei.fF,{ref:t,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",n&&"pl-8",s),...o,children:[r,(0,a.jsx)(ed.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=ei.fF.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ei.tu,{ref:t,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}).displayName=ei.tu.displayName;let ep=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ei.Uv,{children:(0,a.jsx)(ei.VY,{ref:t,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md bg-[#1c1c1c] text-gray-400 border-none p-1 shadow-lg shadow-black/30 animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});ep.displayName=ei.VY.displayName;let ex=n.forwardRef((e,t)=>{let{className:s,inset:n,...r}=e;return(0,a.jsx)(ei.ck,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-[#181818] focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50 text-white",n&&"pl-8",s),...r})});function eh(e){let{item:t,selectedNoteSlug:s,sessionId:r,onNoteSelect:o,onNoteEdit:l,handlePinToggle:i,isPinned:d,isHighlighted:c,isSearching:u,handleNoteDelete:m,openSwipeItemSlug:f,setOpenSwipeItemSlug:p}=e,x=(0,k.h)(),[h,g]=(0,n.useState)(!1),w=f===t.slug;(0,n.useEffect)(()=>{let e=e=>{h&&e.preventDefault()};return document.addEventListener("touchmove",e,{passive:!1}),()=>{document.removeEventListener("touchmove",e)}},[h]);let y=async()=>{p(null),await m(t)},N=()=>{p(null),l(t.slug)},v=()=>{i(t.slug),p(null)},j=t.session_id===r,b=e=>{w&&e()},S=(0,a.jsx)("li",{className:"min-h-[50px] ".concat(!x&&u&&c||!u&&t.slug===s?"bg-[#9D7D28] rounded-md":""),onClick:()=>{o&&o(t)},children:(0,a.jsxs)(es.default,{href:"/".concat(t.slug||""),prefetch:!0,className:"block py-2",children:[(0,a.jsxs)("h2",{className:"text-sm font-bold pl-4 pr-4 break-words",children:[t.emoji," ",t.title]}),(0,a.jsxs)("p",{className:"text-xs pl-4 pr-4 overflow-hidden text-ellipsis whitespace-nowrap ".concat(!x&&u&&c||!u&&t.slug===s?"text-gray-300":"text-gray-400"),children:[(0,a.jsx)("span",{className:"text-white",children:new Date(t.created_at).toLocaleDateString("en-US")})," ",t.content.replace(/\[([^\]]+)\]\([^\)]+\)/g,"$1").replace(/[#*_~`>+\-]/g,"").replace(/\n+/g," ").replace(/\s+/g," ").trim()]})]})}),C=(0,ea.QS)({onSwipeStart:()=>g(!0),onSwiped:()=>g(!1),onSwipedLeft:()=>{p(t.slug),g(!1)},onSwipedRight:()=>{p(null),g(!1)},trackMouse:!0});return x?(0,a.jsxs)("div",{...C,className:"relative overflow-hidden",children:[(0,a.jsx)("div",{className:"transition-transform duration-300 ease-out ".concat(w?"transform -translate-x-24":""),children:S}),(0,a.jsx)(el,{isOpen:w,onPin:()=>b(v),onEdit:()=>b(N),onDelete:()=>b(y),isPinned:d,canEditOrDelete:j})]}):(0,a.jsxs)(em,{children:[(0,a.jsx)(ef,{children:S}),(0,a.jsxs)(ep,{children:[(0,a.jsx)(ex,{onClick:v,className:"cursor-pointer",children:d?"Unpin":"Pin"}),t.session_id===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ex,{onClick:N,className:"cursor-pointer",children:"Edit"}),(0,a.jsx)(ex,{onClick:y,className:"cursor-pointer",children:"Delete"})]})]})]})}function eg(e){let{groupedNotes:t,selectedNoteSlug:s,onNoteSelect:r,sessionId:o,handlePinToggle:l,pinnedNotes:i,addNewPinnedNote:d,localSearchResults:c,highlightedIndex:u,categoryOrder:m,labels:f,handleNoteDelete:p,openSwipeItemSlug:x,setOpenSwipeItemSlug:h,clearSearch:g}=e,w=(0,C.useRouter)(),y=(0,n.useCallback)(e=>{g(),l(e)},[g,l]),N=(0,n.useCallback)(e=>{g(),w.push("/".concat(e))},[g,w]),v=(0,n.useCallback)(async e=>{g(),await p(e)},[g,p]);return(0,a.jsxs)("div",{className:"pt-4 px-2",children:[(0,a.jsxs)("div",{className:"flex py-2 mx-2 items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-bold",children:"Notes"}),(0,a.jsx)(et,{addNewPinnedNote:d,clearSearch:g})]}),null===c?(0,a.jsx)("nav",{children:m.map(e=>t[e]&&t[e].length>0?(0,a.jsxs)("section",{children:[(0,a.jsx)("h3",{className:"py-1 text-xs font-bold text-gray-400 ml-2",children:f[e]}),(0,a.jsx)("ul",{className:"space-y-2",children:t[e].map((e,t)=>(0,a.jsx)(eh,{item:e,selectedNoteSlug:s,sessionId:o,onNoteSelect:r,handlePinToggle:l,isPinned:i.has(e.slug),isHighlighted:!1,isSearching:!1,handleNoteDelete:p,onNoteEdit:N,openSwipeItemSlug:x,setOpenSwipeItemSlug:h},t))})]},e):null)}):c.length>0?(0,a.jsx)("ul",{className:"space-y-2",children:c.map((e,t)=>(0,a.jsx)(eh,{item:e,selectedNoteSlug:s,sessionId:o,onNoteSelect:r,handlePinToggle:y,isPinned:i.has(e.slug),isHighlighted:t===u,isSearching:!0,handleNoteDelete:v,onNoteEdit:N,openSwipeItemSlug:x,setOpenSwipeItemSlug:h},e.id))}):(0,a.jsx)("p",{className:"text-sm text-gray-400 px-2 mt-4",children:"No results found"})]})}ex.displayName=ei.ck.displayName,n.forwardRef((e,t)=>{let{className:s,children:n,checked:r,...o}=e;return(0,a.jsxs)(ei.oC,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ei.wU,{children:(0,a.jsx)(ec.Z,{className:"h-4 w-4"})})}),n]})}).displayName=ei.oC.displayName,n.forwardRef((e,t)=>{let{className:s,children:n,...r}=e;return(0,a.jsxs)(ei.Rk,{ref:t,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ei.wU,{children:(0,a.jsx)(eu.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=ei.Rk.displayName,n.forwardRef((e,t)=>{let{className:s,inset:n,...r}=e;return(0,a.jsx)(ei.__,{ref:t,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold text-foreground",n&&"pl-8",s),...r})}).displayName=ei.__.displayName,n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(ei.Z0,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-border",s),...n})}).displayName=ei.Z0.displayName;var ew=s(5179);function ey(e){let{notes:t,onSearchResults:s,sessionId:n,inputRef:r,searchQuery:o,setSearchQuery:l,setHighlightedIndex:i,clearSearch:d}=e,c=e=>{if(l(e),""===e.trim()){d();return}s(t.filter(t=>(t.public||t.session_id===n)&&(t.title.toLowerCase().includes(e.toLowerCase())||t.content.toLowerCase().includes(e.toLowerCase())))),i(0)};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(D.Z,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)(ew.I,{id:"search",type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"Search",className:"w-full pl-8 pr-2 rounded-md text-base sm:text-sm placeholder:text-gray-400","aria-label":"Search notes",autoComplete:"off",ref:r})]})}let eN={pinned:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.Z,{className:"inline-block w-4 h-4 mr-1"})," Pinned"]}),today:"Today",yesterday:"Yesterday",7:"Previous 7 Days",30:"Previous 30 Days",older:"Older"},ev=["pinned","today","yesterday","7","30","older"];function ej(e){let{notes:t,onNoteSelect:s,isMobile:r}=e,o=(0,C.useRouter)(),l=(0,Q.e)(),[i,d]=(0,n.useState)(""),[c,u]=(0,n.useState)(null),[m,f]=(0,n.useState)(new Set),p=(0,C.usePathname)(),x=(0,n.useRef)(null),[h,g]=(0,n.useState)(null),[w,y]=(0,n.useState)(0),[N,v]=(0,n.useState)({}),[j,S]=(0,n.useState)(null),[k,_]=(0,n.useState)(null),[I,D]=(0,n.useState)(null),[R,T]=(0,n.useState)(""),A=(0,n.useRef)(null);(0,n.useEffect)(()=>{p&&u(p.split("/").pop()||null)},[p]),(0,n.useEffect)(()=>{c?S(t.find(e=>e.slug===c)||null):S(null)},[c,t]),(0,n.useEffect)(()=>{let e=localStorage.getItem("pinnedNotes");if(e)f(new Set(JSON.parse(e)));else{let e=new Set(t.filter(e=>"about-me"===e.slug||"quick-links"===e.slug||e.session_id===i).map(e=>e.slug));f(e),localStorage.setItem("pinnedNotes",JSON.stringify(Array.from(e)))}},[t,i]),(0,n.useEffect)(()=>{let e=function(e,t){let s={pinned:[]};return e.forEach(e=>{if(t.has(e.slug)){s.pinned.push(e);return}let a=e.category;if(!e.public){let t=new Date(e.created_at),s=new Date,n=new Date(s);n.setDate(n.getDate()-1);let r=new Date(s);r.setDate(r.getDate()-7);let o=new Date(s);o.setDate(o.getDate()-30),a=t.toDateString()===s.toDateString()?"today":t.toDateString()===n.toDateString()?"yesterday":t>r?"7":t>o?"30":"older"}s[a]||(s[a]=[]),s[a].push(e)}),s}(t.filter(e=>e.public||e.session_id===i),m);(function(e){Object.keys(e).forEach(t=>{e[t].sort((e,t)=>t.created_at.localeCompare(e.created_at))})})(e),v(e)},[t,i,m]),(0,n.useEffect)(()=>{h&&h.length>0?D(h[w]):D(j)},[h,w,j]);let O=(0,n.useCallback)(()=>{g(null),T(""),y(0),x.current&&(x.current.value="")},[g,y]),L=(0,n.useCallback)(()=>ev.flatMap(e=>N[e]?N[e]:[]),[N]),z=(0,n.useCallback)(e=>{if(!h){let t;let s=L(),a=s.findIndex(e=>e.slug===c);t="up"===e?a>0?a-1:s.length-1:a<s.length-1?a+1:0;let n=s[t];n&&o.push("/".concat(n.slug))}},[L,c,o,h]),Z=(0,n.useCallback)(e=>{f(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),localStorage.setItem("pinnedNotes",JSON.stringify(Array.from(s))),s}),O(),r||o.push("/".concat(e))},[o,r,O]),P=(0,n.useCallback)(async e=>{if(e.public){b({description:"Oops! You can't delete that note"});return}try{let t;let{error:s}=await l.from("notes").delete().eq("slug",e.slug).eq("session_id",i);if(s)throw s;v(t=>{let s={...t};for(let t in s)s[t]=s[t].filter(t=>t.slug!==e.slug);return s});let a=L(),n=a.findIndex(t=>t.slug===e.slug);t=0===n?a[1]:a[n-1],r||o.push(t?"/".concat(t.slug):"/about-me"),O(),o.refresh()}catch(e){console.error("Error deleting note:",e)}},[l,i,L,o,r]),Y=(0,n.useCallback)(()=>{if(h&&h[w]){let e=h[w];o.push("/".concat(e.slug)),O()}},[h,w,o,O]);(0,n.useEffect)(()=>{let e={j:()=>z("down"),ArrowDown:()=>z("down"),k:()=>z("up"),ArrowUp:()=>z("up"),p:()=>I&&Z(I.slug),d:()=>I&&P(I),"/":()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.focus()},Escape:()=>{var e;return null===(e=document.activeElement)||void 0===e?void 0:e.blur()}},t=t=>{var s,a;let n=t.target;if(["INPUT","TEXTAREA","SELECT"].includes(n.tagName)||n.isContentEditable){"Escape"===t.key?e.Escape():"Enter"===t.key&&h&&h.length>0&&(t.preventDefault(),Y());return}let r=t.key;if(e[r]&&!(t.metaKey||t.ctrlKey)){if(t.preventDefault(),null===(s=document.activeElement)||void 0===s||s.blur(),h&&["j","ArrowDown","k","ArrowUp"].includes(r)){let e=["j","ArrowDown"].includes(r)?1:-1;y(t=>(t+e+h.length)%h.length)}else e[r]()}else"k"===t.key&&(t.metaKey||t.ctrlKey)?(t.preventDefault(),null===(a=A.current)||void 0===a||a.setOpen(!0)):"Enter"===t.key&&h&&h.length>0&&(t.preventDefault(),Y())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[z,I,Z,h,y,P,A,Y]);let M=(0,n.useCallback)(e=>{s(e),r||o.push("/".concat(e.slug)),O()},[O,s,r,o]);return(0,a.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,a.jsx)(E.Z,{setSessionId:d}),(0,a.jsx)($,{notes:t,sessionId:i,addNewPinnedNote:Z,navigateNotes:z,togglePinned:Z,deleteNote:P,highlightedNote:I}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[(0,a.jsx)(ey,{notes:t,onSearchResults:g,sessionId:i,inputRef:x,searchQuery:R,setSearchQuery:T,setHighlightedIndex:y,clearSearch:O}),(0,a.jsx)(eg,{groupedNotes:N,selectedNoteSlug:c,onNoteSelect:M,sessionId:i,handlePinToggle:Z,pinnedNotes:m,addNewPinnedNote:Z,localSearchResults:h,highlightedIndex:w,categoryOrder:ev,labels:eN,handleNoteDelete:P,openSwipeItemSlug:k,setOpenSwipeItemSlug:_,clearSearch:O})]})]})}function eb(e){let{children:t,notes:s}=e,r=(0,k.h)(),o=(0,C.useRouter)(),l=(0,C.usePathname)();if((0,n.useEffect)(()=>{null===r||r||"/"!==l||o.push("/about-me")},[r,o,l]),null===r)return null;let i=!r||"/"===l;return(0,a.jsxs)("div",{className:"bg-[#1c1c1c] text-white min-h-screen flex",children:[i&&(0,a.jsx)("div",{className:"".concat(r?"w-full":"w-64 flex-shrink-0 border-r border-gray-400/20"," overflow-y-auto h-screen"),children:(0,a.jsx)(ej,{notes:s,onNoteSelect:r?e=>{o.push("/".concat(e.slug))}:()=>{},isMobile:r})}),(!r||!i)&&(0,a.jsx)("div",{className:"flex-grow overflow-y-auto h-screen",children:t}),(0,a.jsx)(S,{})]})}},5179:function(e,t,s){"use strict";s.d(t,{I:function(){return o}});var a=s(7437),n=s(2265),r=s(1657);let o=n.forwardRef((e,t)=>{let{className:s,type:n,...o}=e;return(0,a.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md bg-[#1c1c1c] text-md placeholder:text-white disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",s),ref:t,...o})});o.displayName="Input"},5322:function(e,t,s){"use strict";s.d(t,{_v:function(){return c},aJ:function(){return d},pn:function(){return l},u:function(){return i}});var a=s(7437),n=s(2265),r=s(1060),o=s(1657);let l=r.zt,i=r.fC,d=r.xz,c=n.forwardRef((e,t)=>{let{className:s,sideOffset:n=4,...l}=e;return(0,a.jsx)(r.VY,{ref:t,sideOffset:n,className:(0,o.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});c.displayName=r.VY.displayName},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(3167),n=s(1367);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}},8458:function(e,t,s){"use strict";s.d(t,{e:function(){return n}});var a=s(1880);function n(){return(0,a.AY)("https://ejwpjpphnwdsbejkince.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqd3BqcHBobndkc2JlamtpbmNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjA2MTM1MzcsImV4cCI6MjAzNjE4OTUzN30.1XcrHRIVKIHQJjrMurxXgDG4USaVEAz5Zb6GM3L-tnI")}},2445:function(){}},function(e){e.O(0,[511,145,971,69,744],function(){return e(e.s=8790)}),_N_E=e.O()}]);